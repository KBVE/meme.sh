import{r as d,j as e}from"./react.C3Okw6ig.js";import{u as t}from"./@nanostores.D3epgRK9.js";import{i as j,a as p,b as N,u as a}from"./userStore.CErzcb8o.js";import{s as o}from"./supabaseClient.D_vLzryr.js";import{L as g}from"./lucide-react.D5kojTiz.js";import"./@supabase.dO6uEFJg.js";import"./Page.astro_astro_type_script_index_0_lang.tntsxO7H.js";import"./react-dom.BGHTHZuc.js";import"./svelte.BVVFYaGB.js";import"./esm-env.rsSWfq8L.js";import"./nanostores.B6d4-zKA.js";const v=({children:l,fallback:i,requireAuth:n=!0,redirectTo:m="/auth/login",loading:x})=>{const c=t(j),u=t(p);t(N);const[h,b]=d.useState(!0);return d.useEffect(()=>{(async()=>{try{const{data:{session:s},error:r}=await o.auth.getSession();if(r){console.error("Session check error:",r),a.setError(r.message);return}s?.user?a.setAuth(s,{id:s.user.id,email:s.user.email,username:s.user.user_metadata?.username,avatar_url:s.user.user_metadata?.avatar_url,full_name:s.user.user_metadata?.full_name}):a.logout()}catch(s){console.error("Auth check error:",s),a.setError(s instanceof Error?s.message:"Authentication check failed")}finally{b(!1)}})();const{data:{subscription:f}}=o.auth.onAuthStateChange((s,r)=>{s==="SIGNED_IN"&&r?.user?a.setAuth(r,{id:r.user.id,email:r.user.email,username:r.user.user_metadata?.username,avatar_url:r.user.user_metadata?.avatar_url,full_name:r.user.user_metadata?.full_name}):s==="SIGNED_OUT"&&a.logout()});return()=>{f.unsubscribe()}},[]),h||u?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-zinc-900 via-zinc-800 to-emerald-900",children:x||e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsx(g,{size:48,className:"text-emerald-400 animate-spin"}),e.jsx("p",{className:"text-neutral-400",children:"Loading..."})]})}):n&&!c?i?e.jsx(e.Fragment,{children:i}):(typeof window<"u"&&(window.location.href=m),null):!n&&c?e.jsx(e.Fragment,{children:l}):e.jsx(e.Fragment,{children:l})},y=()=>e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-zinc-900 via-zinc-800 to-emerald-900 p-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("h1",{className:"text-4xl font-bold text-emerald-400 mb-8",children:"Welcome to your Dashboard"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-zinc-800/50 backdrop-blur border border-zinc-700 rounded-2xl p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-emerald-400 mb-4",children:"Your Memes"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-neutral-300",children:"Total Uploads"}),e.jsx("span",{className:"text-white font-bold",children:"42"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-neutral-300",children:"Total Likes"}),e.jsx("span",{className:"text-white font-bold",children:"1,337"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-neutral-300",children:"Total Views"}),e.jsx("span",{className:"text-white font-bold",children:"12,456"})]})]})]}),e.jsxs("div",{className:"bg-zinc-800/50 backdrop-blur border border-zinc-700 rounded-2xl p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-emerald-400 mb-4",children:"Profile"}),e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 bg-emerald-400 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-black font-bold text-lg",children:"U"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-semibold",children:"User"}),e.jsx("p",{className:"text-neutral-400 text-sm",children:"Meme Creator"})]})]})})]}),e.jsxs("div",{className:"bg-zinc-800/50 backdrop-blur border border-zinc-700 rounded-2xl p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-emerald-400 mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{className:"w-full bg-emerald-600 hover:bg-emerald-700 text-white font-semibold py-2 px-4 rounded-lg transition-colors",children:"Upload Meme"}),e.jsx("button",{className:"w-full bg-zinc-700 hover:bg-zinc-600 text-white font-semibold py-2 px-4 rounded-lg transition-colors",children:"View Analytics"})]})]})]}),e.jsxs("div",{className:"mt-8 bg-zinc-800/50 backdrop-blur border border-zinc-700 rounded-2xl p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-emerald-400 mb-4",children:"Recent Activity"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-zinc-700 last:border-b-0",children:[e.jsx("span",{className:"text-neutral-300",children:'Uploaded "Funny Cat Meme"'}),e.jsx("span",{className:"text-neutral-500 text-sm",children:"2 hours ago"})]}),e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-zinc-700 last:border-b-0",children:[e.jsx("span",{className:"text-neutral-300",children:'Received 50 likes on "Programming Humor"'}),e.jsx("span",{className:"text-neutral-500 text-sm",children:"4 hours ago"})]}),e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-zinc-700 last:border-b-0",children:[e.jsx("span",{className:"text-neutral-300",children:'Commented on "Relatable Monday Mood"'}),e.jsx("span",{className:"text-neutral-500 text-sm",children:"1 day ago"})]})]})]})]})}),I=()=>e.jsx(v,{requireAuth:!0,fallback:e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-zinc-900 via-zinc-800 to-emerald-900 flex items-center justify-center",children:e.jsxs("div",{className:"bg-zinc-800/50 backdrop-blur border border-zinc-700 rounded-2xl p-8 max-w-md text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-emerald-400 mb-4",children:"Authentication Required"}),e.jsx("p",{className:"text-neutral-300 mb-6",children:"Please log in to access your dashboard"}),e.jsx("a",{href:"/auth/login",className:"inline-block bg-emerald-600 hover:bg-emerald-700 text-white font-semibold py-3 px-6 rounded-lg transition-colors",children:"Log In"})]})}),children:e.jsx(y,{})});export{I as Dashboard};
