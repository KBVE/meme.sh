import{o as E,a as w,l as y}from"./nanostores.B6d4-zKA.js";import{r as c}from"./react.shTzKuC5.js";let v=e=>e,i={},u={addEventListener(){},removeEventListener(){}};function g(){try{return typeof localStorage<"u"}catch{return!1}}g()&&(i=localStorage);let L={addEventListener(e,t,n){window.addEventListener("storage",t),window.addEventListener("pageshow",n)},removeEventListener(e,t,n){window.removeEventListener("storage",t),window.removeEventListener("pageshow",n)}};typeof window<"u"&&(u=L);function S(e,t=void 0,n={}){let d=n.encode||v,s=n.decode||v,o=w(t),l=o.set;o.set=r=>{typeof r>"u"?delete i[e]:i[e]=d(r),l(r)};function a(r){r.key===e?r.newValue===null?l(void 0):l(s(r.newValue)):i[e]||l(void 0)}function f(){o.set(i[e]?s(i[e]):t)}return E(o,()=>{if(f(),n.listen!==!1)return u.addEventListener(e,a,f),()=>{u.removeEventListener(e,a,f)}}),o}function b(e,t={}){let n=c.useCallback(s=>t.keys?y(e,t.keys,s):e.listen(s),[t.keys,e]),d=e.get.bind(e);return c.useSyncExternalStore(n,d,d)}export{S as p,b as u};
