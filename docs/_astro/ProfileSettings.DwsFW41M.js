import{r as n,j as e}from"./react.B6lpDu-m.js";import{u as h}from"./@nanostores.ZMiXd8TN.js";import{c as C}from"./clsx.B-dksMZM.js";import{b as k,i as E,a as _,u as f}from"./userStore.IMMha9Dz.js";import{S as b,L as g,U as j,e as L,M as A,G as U,f as M,X as R,g as B,P as D,h as F}from"./lucide-react.BdcP12m_.js";import"./nanostores.B6d4-zKA.js";import"./Page.astro_astro_type_script_index_0_lang.B1u8cgA8.js";import"./react-dom.Dde4QdI_.js";import"./svelte.BVVFYaGB.js";import"./esm-env.rsSWfq8L.js";const O=()=>{const N=h(E),t=h(k),v=h(_),[a,m]=n.useState(!1),[c,y]=n.useState("profile"),[r,x]=n.useState({username:"",display_name:"",bio:"",website:"",location:""}),[u,l]=n.useState([]),[d,p]=n.useState(!1);n.useEffect(()=>{t&&x({username:t.username||"",display_name:t.display_name||"",bio:t.bio||"",website:t.website||"",location:t.location||""})},[t]);const i=(s,o)=>{x(S=>({...S,[s]:o})),u.length>0&&l([])},w=async()=>{f.validateProfile();const s=[];if(r.username&&r.username.length<3&&s.push("Username must be at least 3 characters"),r.bio&&r.bio.length>500&&s.push("Bio must be less than 500 characters"),r.website&&!r.website.match(/^https?:\/\/.+/)&&s.push("Website must be a valid URL"),s.length>0){l(s);return}p(!0);try{f.updateBasicProfile(r),m(!1),l([])}catch(o){console.error("Error saving profile:",o),l(["Failed to save profile. Please try again."])}finally{p(!1)}},z=()=>{t&&x({username:t.username||"",display_name:t.display_name||"",bio:t.bio||"",website:t.website||"",location:t.location||""}),m(!1),l([])},P=[{id:"profile",label:"Profile",icon:j},{id:"preferences",label:"Preferences",icon:L},{id:"account",label:"Account",icon:b}];return N?v||!t?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-zinc-900 via-zinc-800 to-emerald-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(g,{size:48,className:"text-emerald-400 animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-neutral-400",children:"Loading profile..."})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-zinc-900 via-zinc-800 to-emerald-900 p-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("div",{className:"bg-zinc-800/80 backdrop-blur-lg rounded-2xl shadow-2xl border border-zinc-700 p-6 mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-emerald-400 to-green-400 bg-clip-text text-transparent",children:"Profile Settings"}),e.jsx("p",{className:"text-neutral-400 mt-1",children:"Manage your account and preferences"})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-emerald-500 to-green-500 rounded-full flex items-center justify-center text-black text-lg font-bold",children:t.username?.[0]?.toUpperCase()||t.email[0]?.toUpperCase()})})]})}),e.jsxs("div",{className:"bg-zinc-800/80 backdrop-blur-lg rounded-2xl shadow-2xl border border-zinc-700 mb-6",children:[e.jsx("div",{className:"border-b border-zinc-700",children:e.jsx("nav",{className:"flex space-x-8 px-6",children:P.map(s=>e.jsxs("button",{onClick:()=>y(s.id),className:C("flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm transition-colors duration-200",c===s.id?"border-emerald-400 text-emerald-400":"border-transparent text-neutral-400 hover:text-neutral-300 hover:border-neutral-600"),children:[e.jsx(s.icon,{size:18}),e.jsx("span",{children:s.label})]},s.id))})}),e.jsxs("div",{className:"p-6",children:[c==="profile"&&e.jsxs("div",{className:"space-y-6",children:[u.length>0&&e.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 rounded-lg p-4",children:[e.jsx("h4",{className:"text-red-400 font-medium mb-2",children:"Please fix the following errors:"}),e.jsx("ul",{className:"text-red-300 text-sm space-y-1",children:u.map((s,o)=>e.jsxs("li",{children:["â€¢ ",s]},o))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-neutral-300 mb-2",children:[e.jsx(j,{size:16,className:"inline mr-2"}),"Username"]}),a?e.jsx("input",{type:"text",value:r.username,onChange:s=>i("username",s.target.value),className:"w-full px-3 py-2 bg-zinc-700 border border-zinc-600 rounded-lg text-white placeholder-neutral-400 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Enter username"}):e.jsx("p",{className:"text-white py-2",children:t.username||"Not set"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-neutral-300 mb-2",children:"Display Name"}),a?e.jsx("input",{type:"text",value:r.display_name,onChange:s=>i("display_name",s.target.value),className:"w-full px-3 py-2 bg-zinc-700 border border-zinc-600 rounded-lg text-white placeholder-neutral-400 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Enter display name"}):e.jsx("p",{className:"text-white py-2",children:t.display_name||"Not set"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-neutral-300 mb-2",children:[e.jsx(A,{size:16,className:"inline mr-2"}),"Email"]}),e.jsx("p",{className:"text-neutral-400 py-2",children:t.email})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-neutral-300 mb-2",children:[e.jsx(U,{size:16,className:"inline mr-2"}),"Website"]}),a?e.jsx("input",{type:"url",value:r.website,onChange:s=>i("website",s.target.value),className:"w-full px-3 py-2 bg-zinc-700 border border-zinc-600 rounded-lg text-white placeholder-neutral-400 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"https://example.com"}):e.jsx("p",{className:"text-white py-2",children:t.website?e.jsx("a",{href:t.website,target:"_blank",rel:"noopener noreferrer",className:"text-emerald-400 hover:text-emerald-300 hover:underline",children:t.website}):"Not set"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-neutral-300 mb-2",children:[e.jsx(M,{size:16,className:"inline mr-2"}),"Location"]}),a?e.jsx("input",{type:"text",value:r.location,onChange:s=>i("location",s.target.value),className:"w-full px-3 py-2 bg-zinc-700 border border-zinc-600 rounded-lg text-white placeholder-neutral-400 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Enter location"}):e.jsx("p",{className:"text-white py-2",children:t.location||"Not set"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-neutral-300 mb-2",children:"Bio"}),a?e.jsx("textarea",{value:r.bio,onChange:s=>i("bio",s.target.value),rows:4,className:"w-full px-3 py-2 bg-zinc-700 border border-zinc-600 rounded-lg text-white placeholder-neutral-400 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent resize-none",placeholder:"Tell us about yourself...",maxLength:500}):e.jsx("p",{className:"text-white py-2 min-h-[100px] bg-zinc-700/50 rounded-lg px-3",children:t.bio||"No bio set"}),a&&e.jsxs("p",{className:"text-neutral-400 text-sm mt-1",children:[r.bio.length,"/500 characters"]})]}),e.jsx("div",{className:"flex justify-end space-x-4 pt-4 border-t border-zinc-700",children:a?e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:z,disabled:d,className:"px-4 py-2 text-neutral-300 hover:text-white border border-zinc-600 rounded-lg hover:border-zinc-500 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(R,{size:16,className:"inline mr-2"}),"Cancel"]}),e.jsxs("button",{onClick:w,disabled:d,className:"px-4 py-2 bg-gradient-to-r from-emerald-500 to-green-500 text-white rounded-lg hover:from-emerald-600 hover:to-green-600 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:[d?e.jsx(g,{size:16,className:"inline mr-2 animate-spin"}):e.jsx(B,{size:16,className:"inline mr-2"}),d?"Saving...":"Save Changes"]})]}):e.jsxs("button",{onClick:()=>m(!0),className:"px-4 py-2 bg-gradient-to-r from-emerald-500 to-green-500 text-white rounded-lg hover:from-emerald-600 hover:to-green-600 transition-all duration-200",children:[e.jsx(D,{size:16,className:"inline mr-2"}),"Edit Profile"]})})]}),c==="preferences"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(F,{size:48,className:"text-emerald-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Preferences"}),e.jsx("p",{className:"text-neutral-400",children:"Preference settings coming soon..."})]})}),c==="account"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(b,{size:48,className:"text-emerald-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Account Settings"}),e.jsx("p",{className:"text-neutral-400",children:"Account management features coming soon..."})]})})]})]})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-zinc-900 via-zinc-800 to-emerald-900 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-zinc-800/80 backdrop-blur-lg rounded-2xl shadow-2xl p-8 max-w-md w-full border border-zinc-700 text-center",children:[e.jsx(b,{size:48,className:"text-emerald-400 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Authentication Required"}),e.jsx("p",{className:"text-neutral-400 mb-6",children:"Please sign in to access your profile settings."}),e.jsx("a",{href:"/",className:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-emerald-500 to-green-500 text-white rounded-lg font-medium hover:from-emerald-600 hover:to-green-600 transition-all duration-200 transform hover:scale-105",children:"Return Home"})]})})};export{O as ProfileSettings};
