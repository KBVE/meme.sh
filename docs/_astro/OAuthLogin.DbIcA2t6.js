import{j as e}from"./index.CMSeyhcG.js";import{r as u}from"./index.1Jp-s5Xv.js";import{s as p}from"./supabaseClient.UdoNoOaI.js";import{u as i}from"./userStore.DFyG1IMG.js";import{L as x}from"./loader-circle.B5OOkVwn.js";import{c as h}from"./createLucideIcon.BPD19Zc-.js";/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f=h("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g=h("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]),z=({redirectTo:a="/",className:b="",showTitle:o=!0})=>{const[s,c]=u.useState(null),[l,d]=u.useState(null),m=async r=>{try{c(r),d(null),i.setLoading(!0),i.setError(null);const{data:n,error:t}=await p.auth.signInWithOAuth({provider:r,options:{redirectTo:`${window.location.origin}/auth/callback${a!=="/"?`?redirect=${encodeURIComponent(a)}`:""}`,queryParams:{access_type:"offline",prompt:"consent"}}});if(t)throw t}catch(n){console.error(`${r} OAuth error:`,n);const t=n instanceof Error?n.message:`Failed to sign in with ${r}`;d(t),i.setError(t)}finally{c(null),i.setLoading(!1)}};return e.jsxs("div",{className:`space-y-4 ${b}`,children:[o&&e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Quick Sign In"}),e.jsx("p",{className:"text-sm text-neutral-400",children:"Choose your preferred platform"})]}),l&&e.jsx("div",{className:"p-3 rounded-lg bg-red-500/10 border border-red-500/20",children:e.jsx("p",{className:"text-sm text-red-400 text-center",children:l})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:()=>m("discord"),disabled:!!s,className:"w-full flex items-center justify-center space-x-3 px-4 py-3 bg-[#5865F2] hover:bg-[#4752C4] disabled:bg-[#5865F2]/50 text-white rounded-lg font-medium transition-all duration-200 transform hover:scale-[1.02] disabled:transform-none disabled:cursor-not-allowed",children:[s==="discord"?e.jsx(x,{size:20,className:"animate-spin"}):e.jsx(g,{size:20}),e.jsx("span",{children:s==="discord"?"Connecting...":"Continue with Discord"})]}),e.jsxs("button",{onClick:()=>m("github"),disabled:!!s,className:"w-full flex items-center justify-center space-x-3 px-4 py-3 bg-zinc-800 hover:bg-zinc-700 disabled:bg-zinc-800/50 text-white rounded-lg font-medium transition-all duration-200 transform hover:scale-[1.02] disabled:transform-none disabled:cursor-not-allowed border border-zinc-600",children:[s==="github"?e.jsx(x,{size:20,className:"animate-spin"}):e.jsx(f,{size:20}),e.jsx("span",{children:s==="github"?"Connecting...":"Continue with GitHub"})]})]}),!o&&e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-zinc-700"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-zinc-900 text-neutral-400",children:"or"})})]})]})};export{z as O};
