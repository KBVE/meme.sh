import{r as m,j as e}from"./react.C3Okw6ig.js";import{s as b}from"./supabaseClient.D_vLzryr.js";import{u as i}from"./userStore.CErzcb8o.js";import{L as x,o as g,p}from"./lucide-react.D5kojTiz.js";const y=({redirectTo:a="/",className:h="",showTitle:o=!0})=>{const[s,l]=m.useState(null),[c,d]=m.useState(null),u=async r=>{try{l(r),d(null),i.setLoading(!0),i.setError(null);const{data:n,error:t}=await b.auth.signInWithOAuth({provider:r,options:{redirectTo:`${window.location.origin}/auth/callback${a!=="/"?`?redirect=${encodeURIComponent(a)}`:""}`,queryParams:{access_type:"offline",prompt:"consent"}}});if(t)throw t}catch(n){console.error(`${r} OAuth error:`,n);const t=n instanceof Error?n.message:`Failed to sign in with ${r}`;d(t),i.setError(t)}finally{l(null),i.setLoading(!1)}};return e.jsxs("div",{className:`space-y-4 ${h}`,children:[o&&e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Quick Sign In"}),e.jsx("p",{className:"text-sm text-neutral-400",children:"Choose your preferred platform"})]}),c&&e.jsx("div",{className:"p-3 rounded-lg bg-red-500/10 border border-red-500/20",children:e.jsx("p",{className:"text-sm text-red-400 text-center",children:c})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:()=>u("discord"),disabled:!!s,className:"w-full flex items-center justify-center space-x-3 px-4 py-3 bg-[#5865F2] hover:bg-[#4752C4] disabled:bg-[#5865F2]/50 text-white rounded-lg font-medium transition-all duration-200 transform hover:scale-[1.02] disabled:transform-none disabled:cursor-not-allowed",children:[s==="discord"?e.jsx(x,{size:20,className:"animate-spin"}):e.jsx(g,{size:20}),e.jsx("span",{children:s==="discord"?"Connecting...":"Continue with Discord"})]}),e.jsxs("button",{onClick:()=>u("github"),disabled:!!s,className:"w-full flex items-center justify-center space-x-3 px-4 py-3 bg-zinc-800 hover:bg-zinc-700 disabled:bg-zinc-800/50 text-white rounded-lg font-medium transition-all duration-200 transform hover:scale-[1.02] disabled:transform-none disabled:cursor-not-allowed border border-zinc-600",children:[s==="github"?e.jsx(x,{size:20,className:"animate-spin"}):e.jsx(p,{size:20}),e.jsx("span",{children:s==="github"?"Connecting...":"Continue with GitHub"})]})]}),!o&&e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-zinc-700"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-zinc-900 text-neutral-400",children:"or"})})]})]})};export{y as O};
