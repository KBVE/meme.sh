import{r as p,j as e}from"./react.B6lpDu-m.js";import{t as w}from"./tailwind-merge.B9ugUrge.js";import{c as s}from"./clsx.B-dksMZM.js";import{u as x}from"./@nanostores.ZMiXd8TN.js";import{O as y}from"./OAuthLogin.nMyKHK5-.js";import{s as k}from"./supabaseClient.BpnhpdKG.js";import{u as h,i as M,b as z}from"./userStore.IMMha9Dz.js";import{L as C,k as L,T as b,l as A,m as S,n as O,F as I,I as T,X as E}from"./lucide-react.BdcP12m_.js";import{a as j}from"./nanostores.B6d4-zKA.js";import"./@supabase.TBeANHP0.js";import"./Page.astro_astro_type_script_index_0_lang.B1u8cgA8.js";import"./react-dom.Dde4QdI_.js";import"./svelte.BVVFYaGB.js";import"./esm-env.rsSWfq8L.js";const v=({onLogout:c,redirectTo:m="/",className:a="",variant:o="button",showIcon:l=!0,children:f})=>{const[i,r]=p.useState(!1),u=async()=>{try{r(!0),h.setLoading(!0);const{error:n}=await k.auth.signOut();if(n)throw n;h.logout(),c?c():window.location.href=m}catch(n){console.error("Logout error:",n),h.setError(n instanceof Error?n.message:"Failed to log out")}finally{r(!1),h.setLoading(!1)}},N=o==="dropdown-item"?"w-full text-left px-4 py-2 text-sm text-red-400 hover:bg-red-500/10 hover:text-red-300 transition-colors":"inline-flex items-center space-x-2 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium transition-all duration-200 disabled:bg-red-600/50 disabled:cursor-not-allowed";return e.jsx("button",{onClick:u,disabled:i,className:`${N} ${a}`,children:i?e.jsxs(e.Fragment,{children:[e.jsx(C,{size:16,className:"animate-spin"}),e.jsx("span",{children:"Signing out..."})]}):e.jsxs(e.Fragment,{children:[l&&e.jsx(L,{size:16}),e.jsx("span",{children:f||"Sign Out"})]})})},d=j(!1),g=j(!1),t={toggleMenu:()=>d.set(!d.get()),closeMenu:()=>d.set(!1),openMenu:()=>d.set(!0),openAuthModal:()=>g.set(!0),closeAuthModal:()=>g.set(!1)},Q=({className:c})=>{const m=x(d),a=x(M),o=x(z),l=x(g);p.useEffect(()=>{a&&l&&t.closeAuthModal()},[a,l]);const f=()=>l?e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:t.closeAuthModal}),e.jsxs("div",{className:"relative bg-zinc-900 border border-zinc-700 rounded-2xl p-8 max-w-md w-full mx-4 shadow-2xl",children:[e.jsx("button",{onClick:t.closeAuthModal,className:"absolute top-4 right-4 text-neutral-400 hover:text-neutral-200 transition-colors",children:e.jsx(E,{size:20})}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center mb-6",children:[e.jsx(b,{size:32,className:"text-emerald-400 mr-2"}),e.jsx("span",{className:"text-2xl font-bold bg-gradient-to-r from-emerald-400 to-green-400 bg-clip-text text-transparent",children:"Welcome to Meme.sh"})]}),e.jsx("p",{className:"text-neutral-400 mb-8",children:"Sign in to upload, like, and share your favorite memes with the community."}),e.jsx(y,{redirectTo:"/",className:"w-full",showTitle:!1}),e.jsx("p",{className:"text-xs text-neutral-500 mt-4",children:"By signing in, you agree to our Terms of Service and Privacy Policy."})]})]})]}):null;p.useEffect(()=>{const r=document.getElementById("nav-skeleton-loader"),u=document.getElementById("nav-content");r&&u&&setTimeout(()=>{r.style.opacity="0",u.style.opacity="1",setTimeout(()=>{r.remove()},500)},50)},[]);const i=[{label:"Home",href:"/",icon:A},{label:"Memes",href:"/memes",icon:S},{label:"Create",href:"/create",icon:O},{label:"Trending",href:"/trending",icon:I},{label:"About",href:"/about",icon:T}];return e.jsxs(e.Fragment,{children:[e.jsxs("nav",{className:w("bg-zinc-900/80 backdrop-blur-md border-b border-zinc-700 sticky top-0 z-50",c),children:[e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsxs("a",{href:"/",className:"flex items-center space-x-2 group",children:[e.jsx(b,{size:24,className:"text-emerald-400 transition-all duration-500 group-hover:scale-125 group-hover:rotate-[360deg] group-hover:text-green-300 drop-shadow-lg group-hover:drop-shadow-xl"}),e.jsx("span",{className:"text-xl font-bold bg-gradient-to-r from-emerald-400 to-green-400 bg-clip-text text-transparent group-hover:from-green-300 group-hover:to-emerald-300 transition-all duration-300",children:"Meme.sh"})]})}),e.jsx("div",{className:"hidden md:flex items-center space-x-8",children:i.map(r=>e.jsxs("a",{href:r.href,className:s("flex items-center space-x-1 px-3 py-2 rounded-md text-sm font-medium group relative overflow-hidden","text-neutral-300 hover:text-emerald-400 hover:bg-emerald-500/10","transition-all duration-300 hover:shadow-lg hover:shadow-emerald-500/20","before:absolute before:inset-0 before:bg-gradient-to-r before:from-emerald-500/0 before:via-emerald-500/10 before:to-emerald-500/0","before:translate-x-[-100%] before:transition-transform before:duration-500 hover:before:translate-x-[100%]"),"aria-label":r.label,children:[e.jsx(r.icon,{size:18,className:"transition-all duration-300 group-hover:scale-125 group-hover:text-emerald-300 group-hover:rotate-12 group-hover:drop-shadow-lg"}),e.jsx("span",{className:"hidden lg:inline transition-all duration-300 group-hover:translate-x-1",children:r.label})]},r.href))}),e.jsx("div",{className:"hidden md:flex items-center space-x-4",children:a?e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("a",{href:"/profile",className:"flex items-center space-x-2 px-3 py-2 rounded-md text-sm font-medium text-neutral-300 hover:text-emerald-400 hover:bg-emerald-500/10 transition-all duration-300",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-emerald-500 to-green-500 rounded-full flex items-center justify-center text-black text-sm font-medium",children:o?.username?.[0]?.toUpperCase()||o?.email[0]?.toUpperCase()||"U"}),e.jsx("span",{className:"hidden lg:inline",children:o?.username||o?.email?.split("@")[0]})]}),e.jsx(v,{className:s("px-4 py-2 text-sm font-medium text-neutral-300 hover:text-red-400","border border-zinc-600 rounded-md hover:border-red-400","transition-colors duration-200"),variant:"button",showIcon:!1,onLogout:()=>{t.closeMenu()},children:"Sign Out"})]}):e.jsx("button",{onClick:t.openAuthModal,className:s("px-4 py-2 text-sm font-medium text-black","bg-gradient-to-r from-emerald-400 to-green-400 rounded-md","hover:from-emerald-500 hover:to-green-500","transition-all duration-200 transform hover:scale-105"),children:"Sign In"})}),e.jsx("div",{className:"md:hidden",children:e.jsx("button",{onClick:t.toggleMenu,className:s("p-2 rounded-md text-neutral-300 hover:text-emerald-400 hover:bg-emerald-500/10","transition-colors duration-200"),"aria-label":"Toggle menu",children:e.jsx("svg",{className:"h-6 w-6",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:m?e.jsx("path",{d:"M6 18L18 6M6 6l12 12"}):e.jsx("path",{d:"M4 6h16M4 12h16M4 18h16"})})})})]})}),m&&e.jsx("div",{className:"md:hidden",children:e.jsxs("div",{className:"px-2 pt-2 pb-3 space-y-1 bg-zinc-900/95 backdrop-blur-md border-t border-zinc-700",children:[i.map(r=>e.jsxs("a",{href:r.href,className:s("flex items-center space-x-2 px-3 py-2 rounded-md text-base font-medium group relative overflow-hidden","text-neutral-300 hover:text-emerald-400 hover:bg-emerald-500/10","transition-all duration-300 hover:shadow-lg hover:shadow-emerald-500/20","before:absolute before:inset-0 before:bg-gradient-to-r before:from-emerald-500/0 before:via-emerald-500/10 before:to-emerald-500/0","before:translate-x-[-100%] before:transition-transform before:duration-500 hover:before:translate-x-[100%]"),onClick:t.closeMenu,"aria-label":r.label,children:[e.jsx(r.icon,{size:20,className:"transition-all duration-300 group-hover:scale-125 group-hover:text-emerald-300 group-hover:rotate-12 group-hover:drop-shadow-lg"}),e.jsx("span",{className:"transition-all duration-300 group-hover:translate-x-1",children:r.label})]},r.href)),e.jsx("div",{className:"pt-4 border-t border-zinc-700",children:a?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("a",{href:"/profile",className:"flex items-center space-x-3 px-3 py-2 text-neutral-300 hover:text-emerald-400 hover:bg-emerald-500/10 rounded-md transition-all duration-300",onClick:t.closeMenu,children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-emerald-500 to-green-500 rounded-full flex items-center justify-center text-black font-medium",children:o?.username?.[0]?.toUpperCase()||o?.email[0]?.toUpperCase()||"U"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:o?.username||"User"}),e.jsx("p",{className:"text-xs text-neutral-500",children:o?.email})]})]}),e.jsx("a",{href:"/profile/settings",className:"w-full text-left px-3 py-2 text-base font-medium text-neutral-300 hover:text-emerald-400 hover:bg-emerald-500/10 rounded-md transition-colors duration-200 block",onClick:t.closeMenu,children:"Profile Settings"}),e.jsx(v,{className:s("w-full text-left px-3 py-2 text-base font-medium","text-red-400 hover:bg-red-500/10 rounded-md","transition-colors duration-200"),variant:"dropdown-item",showIcon:!1,onLogout:()=>{t.closeMenu()},children:"Sign Out"})]}):e.jsx("div",{className:"px-3",children:e.jsx("button",{onClick:t.openAuthModal,className:s("w-full px-3 py-2 text-base font-medium text-black","bg-gradient-to-r from-emerald-400 to-green-400 rounded-md","hover:from-emerald-500 hover:to-green-500","transition-all duration-200"),children:"Sign In"})})})]})})]}),e.jsx(f,{})]})};export{Q as NavigationBar};
